function k(l,{validationHelpers:f={},rules:c,dataRule:o,dataErrorMessages:p={}}){let d={};function y(r,i){if(!r||typeof i!="string")return;let t=i.split("."),s=r;for(let a of t){if(s[a]===void 0)return;s=s[a]}return s}function n(r,i=null){let{rule:t,required:s}=o[r.key];if((t&&s||!s&&r.value!="")&&t){let a=t.split("--")[0],e=t.split("--").length>1?t.split("--")[1]:"",m=M(r.value,c[a],e,f,i),{isValid:g,errorMessage:h,errorType:V}=m.validate();return g||(d[r.key]={name:r.key,error:!0,errorMessage:y(p,h)||h,errorType:V}),g}return!0}function u(){let r=Object.keys(l).map(i=>({key:i,value:l[i]}));if(r&&r.length>0){if(!Object.keys(o).every(e=>l.hasOwnProperty(e)))return{error:!0,errorMessage:"Missing properties"};if([...r].map(e=>n(e,l)).some(e=>!e))return{error:!0,dataErrors:d};let t=Object.keys(o).map(e=>({key:e,required:o[e].required})),s=r.map(e=>e.key);if(!t.filter(e=>e.required).map(e=>e.key).every(e=>s.includes(e)))return{error:!0}}else if(!r||r.length===0)return{error:!0,errorMessage:"Missing fields for dataRules"};return{ok:!0}}return u()}function M(l,f,c=null,o=null,p=null){function d(n){let u,r;return{isValid:!n.validate.some(t=>{let s=!0;if(n.params&&n.params[t]&&n.params[t].length>0){let a=n.params[t].map(e=>typeof e=="string"&&e[0]==="$"?e.substring(1,e.length):e);s=!this[t](...a)}else s=!this[t]();return s&&!u&&n?.error[t]&&(u=n.error[t],r=t),s}),errorMessage:u,errorType:r}}function y(){if(o&&typeof o=="function"){let n=o(l,f,c,p);Object.keys(n).forEach(u=>{this[u]=n[u]})}return c?d.call(this,f.modifier[c]):d.call(this,f)}return{validate:y}}var q={dataValidate:k};export{q as default};
