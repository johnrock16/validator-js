var g=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var q=Object.prototype.hasOwnProperty;var E=(n,s)=>{for(var u in s)g(n,u,{get:s[u],enumerable:!0})},v=(n,s,u,a)=>{if(s&&typeof s=="object"||typeof s=="function")for(let f of b(s))!q.call(n,f)&&f!==u&&g(n,f,{get:()=>s[f],enumerable:!(a=O(s,f))||a.enumerable});return n};var R=n=>v(g({},"__esModule",{value:!0}),n);var T={};E(T,{default:()=>I});module.exports=R(T);function m(n,{validationHelpers:s={},rules:u,dataRule:a,dataErrorMessages:f={}}){let p={};function y(r,l){if(!r||typeof l!="string")return;let t=l.split("."),o=r;for(let d of t){if(o[d]===void 0)return;o=o[d]}return o}function i(r,l=null){let{rule:t,required:o}=a[r.key];if((t&&o||!o&&r.value!="")&&t){let d=t.split("--")[0],e=t.split("--").length>1?t.split("--")[1]:"",V=j(r.value,u[d],e,s,l),{isValid:h,errorMessage:k,errorType:M}=V.validate();return h||(p[r.key]={name:r.key,error:!0,errorMessage:y(f,k)||k,errorType:M}),h}return!0}function c(){let r=Object.keys(n).map(l=>({key:l,value:n[l]}));if(r&&r.length>0){if(!Object.keys(a).every(e=>n.hasOwnProperty(e)))return{error:!0,errorMessage:"Missing properties"};if([...r].map(e=>i(e,n)).some(e=>!e))return{error:!0,dataErrors:p};let t=Object.keys(a).map(e=>({key:e,required:a[e].required})),o=r.map(e=>e.key);if(!t.filter(e=>e.required).map(e=>e.key).every(e=>o.includes(e)))return{error:!0}}else if(!r||r.length===0)return{error:!0,errorMessage:"Missing fields for dataRules"};return{ok:!0}}return c()}function j(n,s,u=null,a=null,f=null){function p(i){let c,r;return{isValid:!i.validate.some(t=>{let o=!0;if(i.params&&i.params[t]&&i.params[t].length>0){let d=i.params[t].map(e=>typeof e=="string"&&e[0]==="$"?e.substring(1,e.length):e);o=!this[t](...d)}else o=!this[t]();return o&&!c&&(i!=null&&i.error[t])&&(c=i.error[t],r=t),o}),errorMessage:c,errorType:r}}function y(){if(a&&typeof a=="function"){let i=a(n,s,u,f);Object.keys(i).forEach(c=>{this[c]=i[c]})}return u?p.call(this,s.modifier[u]):p.call(this,s)}return{validate:y}}var I={dataValidate:m};
